# xbuilder 配置文件
# 完整示例请运行: xbuilder gen config

version: "1.0"

project:
  name: "my-project"

pipeline:
  # Maven 构建
  - stage: "build"
    name: "构建"
    tasks:
      - name: "Maven 打包"
        type: "maven"
        config:
          command: "mvn clean package -DskipTests"

  # Docker 构建
  - stage: "docker"
    name: "Docker 构建"
    tasks:
      - name: "构建镜像"
        type: "docker-build"
        config:
          dockerfile: "./Dockerfile"
          context: "."
          image_name: "my-project"
          tag: "latest"
          # 强制降级刷新（合并日志输出），避免 Docker 构建日志刷屏
          force_refresh: true
